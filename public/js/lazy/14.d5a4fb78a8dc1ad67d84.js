(window.webpackJsonp=window.webpackJsonp||[]).push([[14],{123:function(e,t,a){"use strict";a.r(t);var i={middleware:"auth",data:function(){return{totalUsers:0,userList:[],userListLoading:!1,pagination:{},pageItems:[5,10,25],searcher:{input:"",value:null},tableHeaders:[{text:"ID",value:"id"},{text:"用户名",value:"name",sortable:!1},{text:"邮箱",value:"email",sortable:!1},{text:"创建时间",value:"created_at"},{text:"",value:"",sortable:!1}],dialogForm:{name:"",email:"",password:""},dialog:!1,breadcrumbs:[{text:"首页",disabled:!1,to:"/"},{text:"用户",to:"/user"}]}},mounted:function(){},watch:{pagination:{handler:function(){this.getUsersFromApi()},deep:!0}},methods:{getUsersFromApi:function(){var e=this;this.userListLoading=!0,this.axios.get("user/list",{params:{page:this.pagination.page,row:this.pagination.rowsPerPage,sortBy:this.pagination.sortBy,desc:this.pagination.descending,search:this.searcher.value}}).then(function(t){e.userListLoading=!1,e.userList=t.data.success.data,e.totalUsers=t.data.success.total})},searchEvent:function(){this.searcher.value=""==this.searcher.input?null:this.searcher.input,this.getUsersFromApi()},dialogFormSubmit:function(){var e=this;this.axios.post("user/add",this.dialogForm).then(function(t){e.dialog=!1,e.dialogFormReset(),e.getUsersFromApi()})},dialogFormReset:function(){this.dialog=!1,this.dialogForm={name:"",email:"",password:""}},userDelete:function(e){var t=this;confirm("警告：确定删除用户"+e.item.name+"吗？删除后无法恢复！！！！")&&(this.axios.delete("user/delete",{data:{id:e.item.id}}).then(function(e){t.getUsersFromApi()}),console.log(e))}}},s=a(1),o=Object(s.a)(i,function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("v-breadcrumbs",{attrs:{items:e.breadcrumbs}}),e._v(" "),a("v-card",[a("v-card-title",{attrs:{"primary-title":""}},[a("v-text-field",{attrs:{"append-icon":"search",label:"用户名、邮箱","single-line":"","hide-details":""},on:{keyup:function(t){return"button"in t||!e._k(t.keyCode,"enter",13,t.key,"Enter")?e.searchEvent(t):null}},model:{value:e.searcher.input,callback:function(t){e.$set(e.searcher,"input",t)},expression:"searcher.input"}}),e._v(" "),a("v-spacer"),e._v(" "),a("v-dialog",{attrs:{persistent:"","max-width":"600px"},model:{value:e.dialog,callback:function(t){e.dialog=t},expression:"dialog"}},[a("v-btn",{attrs:{slot:"activator",fab:"",dark:"",color:"success"},slot:"activator"},[a("v-icon",{attrs:{dark:""}},[e._v("add")])],1),e._v(" "),a("v-card",[a("v-card-title",[a("span",{staticClass:"headline"},[e._v("新增用户")])]),e._v(" "),a("v-card-text",[a("v-text-field",{attrs:{label:"用户名*",required:"",autocomplete:"off"},model:{value:e.dialogForm.name,callback:function(t){e.$set(e.dialogForm,"name",t)},expression:"dialogForm.name"}}),e._v(" "),a("v-text-field",{attrs:{label:"邮箱*",name:"email",type:"email",autocomplete:"off",required:""},model:{value:e.dialogForm.email,callback:function(t){e.$set(e.dialogForm,"email",t)},expression:"dialogForm.email"}}),e._v(" "),a("v-text-field",{attrs:{label:"密码*",name:"password",type:"password",autocomplete:"new-password",required:""},model:{value:e.dialogForm.password,callback:function(t){e.$set(e.dialogForm,"password",t)},expression:"dialogForm.password"}})],1),e._v(" "),a("v-card-actions",[a("v-spacer"),e._v(" "),a("v-btn",{attrs:{color:"blue darken-1",flat:""},on:{click:e.dialogFormReset}},[e._v("关闭")]),e._v(" "),a("v-btn",{attrs:{color:"blue darken-1",flat:""},on:{click:e.dialogFormSubmit}},[e._v("保存")])],1)],1)],1)],1),e._v(" "),a("v-data-table",{staticClass:"elevation-1",attrs:{headers:e.tableHeaders,items:e.userList,loading:e.userListLoading,"total-items":e.totalUsers,pagination:e.pagination,"rows-per-page-items":e.pageItems,"must-sort":"","item-key":"name","no-data-text":"没有数据","rows-per-page-text":"每页显示"},on:{"update:pagination":function(t){e.pagination=t}},scopedSlots:e._u([{key:"items",fn:function(t){return[a("td",[e._v(e._s(t.item.id))]),e._v(" "),a("td",[e._v(e._s(t.item.name))]),e._v(" "),a("td",[e._v(e._s(t.item.email))]),e._v(" "),a("td",[e._v(e._s(t.item.created_at))]),e._v(" "),a("td",[a("v-btn",{attrs:{color:"info",flat:"",icon:""},on:{click:function(t){e.dialog=!1}}},[a("v-icon",{attrs:{dark:""}},[e._v("edit")])],1),e._v(" "),a("v-btn",{attrs:{color:"error",flat:"",icon:""},on:{click:function(a){e.userDelete(t)}}},[a("v-icon",{attrs:{dark:""}},[e._v("delete")])],1)],1)]}}])})],1)],1)},[],!1,null,null,null);o.options.__file="user.vue";t.default=o.exports}}]);