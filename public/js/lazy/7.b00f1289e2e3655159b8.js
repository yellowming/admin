(window.webpackJsonp=window.webpackJsonp||[]).push([[7],{121:function(e,t,r){"use strict";r.r(t);var a=r(0),n=r.n(a);function s(e,t,r,a,n,s,o){try{var i=e[s](o),l=i.value}catch(e){return void r(e)}i.done?t(l):Promise.resolve(l).then(a,n)}var o={layout:"basic",middleware:"guest",metaInfo:function(){return{title:this.$t("login")}},data:function(){return{valid:!0,email:"867822412@qq.com",password:"4356465754676",loading:!1,emailRules:[function(e){return!!e||"请输入邮箱"},function(e){return/.+@.+/.test(e)||"邮箱格式不正确"}],passwordRules:[function(e){return!!e||"请输入密码"},function(e){return e.length>=10||"密码必须大于10个字符"}],remember:!1}},methods:{login:function(){var e,t=(e=n.a.mark(function e(){var t,r,a=this;return n.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return this.loading=!0,e.next=3,this.$store.dispatch("auth/login",{email:this.email,password:this.password,remember:this.remember}).catch(function(e){a.loading=!1,a.$toast({message:"登录失败！请检查",time:3e3,color:"error"})});case 3:return t=e.sent,r=t.data,this.$store.dispatch("auth/saveToken",{token:r.token_type+" "+r.access_token,expires:r.expires_in}),e.next=8,this.$store.dispatch("auth/fetchUser").catch(function(e){a.loading=!1,a.$toast({message:"登录失败！请检查",color:"error"})});case 8:this.$toast("登录成功"),this.loading=!1,this.$router.push({name:"home"});case 11:case"end":return e.stop()}},e,this)}),function(){var t=this,r=arguments;return new Promise(function(a,n){var o=e.apply(t,r);function i(e){s(o,a,n,i,l,"next",e)}function l(e){s(o,a,n,i,l,"throw",e)}i(void 0)})});return function(){return t.apply(this,arguments)}}()}},i=r(1),l=Object(i.a)(o,function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("v-app",{attrs:{id:"inspire"}},[r("v-content",[r("v-container",{attrs:{fluid:"","fill-height":""}},[r("v-layout",{attrs:{"align-center":"","justify-center":""}},[r("v-flex",{attrs:{xs12:"",sm8:"",md4:""}},[r("v-card",{staticClass:"elevation-12"},[r("v-form",{ref:"form",attrs:{"lazy-validation":""},on:{submit:function(t){return t.preventDefault(),e.login(t)}},model:{value:e.valid,callback:function(t){e.valid=t},expression:"valid"}},[r("v-toolbar",{attrs:{dark:"",color:"primary"}},[r("v-toolbar-title",[e._v(e._s(e.$t("login")))])],1),e._v(" "),r("v-card-text",[r("v-text-field",{attrs:{"prepend-icon":"person",name:"user",label:e.$t("email"),rules:e.emailRules,required:""},model:{value:e.email,callback:function(t){e.email=t},expression:"email"}}),e._v(" "),r("v-text-field",{attrs:{"prepend-icon":"lock",name:"password",label:e.$t("password"),type:"password",rules:e.passwordRules,required:""},model:{value:e.password,callback:function(t){e.password=t},expression:"password"}}),e._v(" "),r("v-checkbox",{attrs:{name:"remember",label:e.$t("remember_me")},model:{value:e.remember,callback:function(t){e.remember=t},expression:"remember"}})],1),e._v(" "),r("v-card-actions",[r("router-link",{staticClass:"small ml-auto my-auto",attrs:{to:{name:"password.request"}}},[e._v("\n              "+e._s(e.$t("forgot_password"))+"\n            ")]),e._v(" "),r("v-spacer"),e._v(" "),r("v-btn",{attrs:{color:"primary",loading:e.loading,type:"submit"}},[e._v(e._s(e.$t("login")))])],1)],1)],1)],1)],1)],1)],1)],1)},[],!1,null,null,null);l.options.__file="login.vue";t.default=l.exports}}]);