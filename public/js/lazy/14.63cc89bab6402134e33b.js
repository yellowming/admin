(window.webpackJsonp=window.webpackJsonp||[]).push([[14],{122:function(t,e,a){"use strict";a.r(e);var i={middleware:"auth",data:function(){return{totalUsers:0,userList:[],userListLoading:!1,pagination:{},pageItems:[5,10,25],searcher:{input:"",value:null},tableHeaders:[{text:"ID",value:"id"},{text:"用户名",value:"name",sortable:!1},{text:"邮箱",value:"email",sortable:!1},{text:"创建时间",value:"created_at"},{text:"",value:"",sortable:!1}],apiTimer:null,dialogForm:{name:"",email:"",password:""},isEdite:!1,dialog:!1,breadcrumbs:[{text:"首页",disabled:!1,to:"/"},{text:"用户",to:"/user"}]}},mounted:function(){},methods:{paginatorUpdate:function(){clearTimeout(this.apiTimer),this.apiTimer=setTimeout(this.getUsersFromApi,100)},getUsersFromApi:function(){var t=this;this.userListLoading=!0;var e={page:this.pagination.page,row:this.pagination.rowsPerPage,sortBy:this.pagination.sortBy,desc:this.pagination.descending,search:this.searcher.value};this.axios.get("user/list",{params:e}).then(function(e){t.userListLoading=!1,t.userList=e.data.success.data,t.totalUsers=e.data.success.total})},searchEvent:function(){var t=this.searcher.value;this.searcher.value=""==this.searcher.input?null:this.searcher.input,t!==this.searcher.value&&this.getUsersFromApi()},dialogFormSubmit:function(){var t=this,e=this.isEdite?"user/edite":"user/add";this.axios.post(e,this.dialogForm).then(function(e){t.dialog=!1,t.$toast(t.isEdite?"修改成功！":"添加成功！"),t.dialogFormReset(),t.getUsersFromApi()})},dialogFormReset:function(){this.dialog=!1,this.isEdite=!1,this.dialogForm={name:"",email:"",password:""}},userDelete:function(t){var e=this;confirm("警告：确定删除用户"+t.name+"吗？删除后无法恢复！！！！")&&this.axios.delete("user/delete",{data:{id:t.id}}).then(function(t){e.$toast("删除成功！"),e.getUsersFromApi()})},userEdite:function(t){this.dialogForm={name:t.name,email:t.email,password:"",id:t.id},this.isEdite=!0,this.dialog=!0}}},s=a(1),r=Object(s.a)(i,function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("v-breadcrumbs",{attrs:{items:t.breadcrumbs}}),t._v(" "),a("v-card",[a("v-card-title",{attrs:{"primary-title":""}},[a("v-text-field",{attrs:{"append-icon":"search",label:"用户名、邮箱","single-line":"","hide-details":""},on:{keyup:function(e){return"button"in e||!t._k(e.keyCode,"enter",13,e.key,"Enter")?t.searchEvent(e):null}},model:{value:t.searcher.input,callback:function(e){t.$set(t.searcher,"input",e)},expression:"searcher.input"}}),t._v(" "),a("v-spacer"),t._v(" "),a("v-dialog",{attrs:{persistent:"","max-width":"600px"},model:{value:t.dialog,callback:function(e){t.dialog=e},expression:"dialog"}},[a("v-btn",{attrs:{slot:"activator",fab:"",dark:"",color:"success"},slot:"activator"},[a("v-icon",{attrs:{dark:""}},[t._v("add")])],1),t._v(" "),a("v-card",[a("v-card-title",[a("span",{staticClass:"headline"},[t._v(t._s(t.isEdite?"编辑用户":"新增用户"))])]),t._v(" "),a("v-card-text",[a("v-text-field",{attrs:{label:"用户名",required:"",autocomplete:"off"},model:{value:t.dialogForm.name,callback:function(e){t.$set(t.dialogForm,"name",e)},expression:"dialogForm.name"}}),t._v(" "),a("v-text-field",{attrs:{label:"邮箱",name:"email",type:"email",autocomplete:"off",required:""},model:{value:t.dialogForm.email,callback:function(e){t.$set(t.dialogForm,"email",e)},expression:"dialogForm.email"}}),t._v(" "),a("v-text-field",{attrs:{label:"密码",hint:"密码为空时不修改密码","persistent-hint":t.isEdite,name:"password",type:"password",autocomplete:"new-password",required:""},model:{value:t.dialogForm.password,callback:function(e){t.$set(t.dialogForm,"password",e)},expression:"dialogForm.password"}})],1),t._v(" "),a("v-card-actions",[a("v-spacer"),t._v(" "),a("v-btn",{attrs:{color:"blue darken-1",flat:""},on:{click:t.dialogFormReset}},[t._v("关闭")]),t._v(" "),a("v-btn",{attrs:{color:"blue darken-1",flat:""},on:{click:t.dialogFormSubmit}},[t._v("保存")])],1)],1)],1)],1),t._v(" "),a("v-data-table",{staticClass:"elevation-1",attrs:{headers:t.tableHeaders,items:t.userList,loading:t.userListLoading,"total-items":t.totalUsers,pagination:t.pagination,"rows-per-page-items":t.pageItems,"no-data-text":"没有数据","rows-per-page-text":"每页显示","must-sort":""},on:{"update:pagination":[function(e){t.pagination=e},t.paginatorUpdate]},scopedSlots:t._u([{key:"items",fn:function(e){return[a("td",[t._v(t._s(e.item.id))]),t._v(" "),a("td",[t._v(t._s(e.item.name))]),t._v(" "),a("td",[t._v(t._s(e.item.email))]),t._v(" "),a("td",[t._v(t._s(e.item.created_at))]),t._v(" "),a("td",[a("v-btn",{attrs:{color:"info",flat:"",icon:""},on:{click:function(a){t.userEdite(e.item)}}},[a("v-icon",{attrs:{dark:""}},[t._v("edit")])],1),t._v(" "),a("v-btn",{attrs:{color:"error",flat:"",icon:""},on:{click:function(a){t.userDelete(e.item)}}},[a("v-icon",{attrs:{dark:""}},[t._v("delete")])],1)],1)]}}])})],1)],1)},[],!1,null,null,null);r.options.__file="user.vue";e.default=r.exports}}]);